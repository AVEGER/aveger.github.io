---
title: Python的作用域
tags: Python
---

当我们编写 Python 代码时，我们经常会使用函数来组织和重用代码。在 Python 中，函数是一种可调用对象，可以接受参数并返回值。但是，当我们在函数中定义变量时，我们需要注意变量的作用域。<!--more-->

## 什么是作用域？

作用域是指变量的可见性和生命周期。在 Python 中，每个变量都有其作用域，其定义在代码中的位置决定了其作用域。Python 中有两种作用域：全局作用域和局部作用域。

## 全局作用域

全局作用域是指在整个程序中都可以访问的变量。在 Python 中，我们可以在函数外部定义全局变量。例如：

```python
x = 10

def foo():
    print(x)

foo()  # 输出 10
```

在上面的例子中，我们定义了一个全局变量 `x`，并在 `foo` 函数中使用了它。由于 `x` 是全局变量，因此在 `foo` 函数中可以访问它。

## 局部作用域

局部作用域是指变量只在函数内部可见。在 Python 中，我们可以在函数内部定义局部变量。例如：

```python
def foo():
    x = 10
    print(x)

foo()  # 输出 10
```

在上面的例子中，我们定义了一个局部变量 `x`，并在 `foo` 函数中使用了它。由于 `x` 是局部变量，因此只能在 `foo` 函数中访问它。

## 嵌套作用域

在 Python 中，我们可以在函数内部定义函数。这些函数被称为嵌套函数。在嵌套函数中，我们可以访问外部函数的变量。例如：

```python
def outer():
    x = 10
    def inner():
        print(x)
    inner()

outer()  # 输出 10
```

在上面的例子中，我们定义了一个嵌套函数 `inner`，并在其中访问了外部函数 `outer` 中的变量 `x`。由于 `x` 是在外部函数中定义的，因此在嵌套函数中也可以访问它。

## global 关键字

有时候，我们需要在函数内部修改全局变量。在 Python 中，我们可以使用 `global` 关键字来实现这一点。例如：

```python
x = 10

def foo():
    global x
    x = 20

foo()
print(x)  # 输出 20
```

在上面的例子中，我们在 `foo` 函数中使用了 `global` 关键字来告诉 Python `x` 是一个全局变量。然后，我们修改了 `x` 的值，并在函数外部输出了它。

## nonlocal 关键字

类似于 `global` 关键字，Python 还提供了 `nonlocal` 关键字，用于在嵌套函数中访问外部函数的变量。例如：

```python
def outer():
    x = 10
    def inner():
        nonlocal x
        x = 20
    inner()
    print(x)

outer()  # 输出 20
```

在上面的例子中，我们在嵌套函数 `inner` 中使用了 `nonlocal` 关键字来告诉 Python `x` 是外部函数 `outer` 中的变量。然后，我们修改了 `x` 的值，并在外部函数中输出了它。

## 总结

在 Python 中，作用域是指变量的可见性和生命周期。Python 中有两种作用域：全局作用域和局部作用域。在函数内部，我们可以访问外部函数的变量，这被称为嵌套作用域。如果我们需要在函数内部修改全局变量，可以使用 `global` 关键字。如果我们需要在嵌套函数中访问外部函数的变量，可以使用 `nonlocal` 关键字。